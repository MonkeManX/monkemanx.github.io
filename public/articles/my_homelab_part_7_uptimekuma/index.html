<!DOCTYPE html>
<html>
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
      <a id="top"></a>
      <meta charset="utf-8">
      <meta name="viewport" 
          content="width=device-width, initial-scale=1.0">
      <title>My site</title>
      <link rel="stylesheet" href="/styles/style.css">  

      <link rel="stylesheet" href="/css/syntax.css">
      <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath: [['\\(', '\\)']]                  
    }
  };
</script>

  </head>
  <body><div class="nav-div">
  <nav>
        <a href="http://localhost:1313/" class="">Home</a>
        <a href="http://localhost:1313/articles/" class="active">Articles</a>
        <a href="http://localhost:1313/paper-summary/" class="">Paper-Summaries</a>
        <a href="http://localhost:1313/tags/" class="">Tags</a>
        <a href="http://localhost:1313/poetry/" class="">Writings</a>
        <a href="http://localhost:1313/tangled_thoughts/" class="">Tangled-Thoughts</a>
        <a href="http://localhost:1313/media/" class="">Media</a>
        <a href="http://localhost:1313/links/" class="">Links</a>
        <a href="http://localhost:1313/about/" class="">About</a>
  </nav>
</div>
<div id="content">
<div class="article-content"> 
  <h1> My Homelab Part 7: UptimeKuma </h1>
  <p class="pub-date">Published: January 20, 2024</p>
  
  <p>Maybe at some point you have encountered a situation where, while running all your current containers, you tried accessing one of your services only to realize that the service is not available because the container exited without your knowledge?</p>
<p>For such Issues, it&rsquo;s beneficial to have a notification system that can automatically alert you whenever a container exits or is no longer available.  To address this need, I use <a href="https://uptime.kuma.pet/">UptimeKuma</a>, an easy-to-use self-hosted monitoring tool. UptimeKuma can monitor uptime over means like HTTP(s)/TCP/Ping/Docker/DNS and notify you via various channels such as Telegram, Discord, Gotify, Slack, Email, and more. Additionally, it provides a user-friendly web interface for managing and adding new monitors.</p>


<figure>
    <img style="display: block; margin-left: auto; margin-right: auto; width:80%" src="/attachments/5fb6d6ee5c143dedeeb77148ea1d2ff3.png">
    <figcaption style="text-align:center">UptimeKuma Page</figcaption>
</figure>


<h2 id="installation">Installation</h2>
<p>To install UptimeKuma, I utilized Docker Compose with the following configuration in the compose file(uptimeKuma-compose.yml):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3.8&#39;</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="w">  </span><span class="nt">uptime-kuma</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">louislam/uptime-kuma:1</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">uptime-kuma</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="w">      </span>- <span class="l">/root/uptime-kuma/:/app/data</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 9</span><span class="cl"><span class="w">      </span>- <span class="w"> </span><span class="l">/var/run/docker.sock:/var/run/docker.sock</span><span class="w">
</span></span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="w">      </span>- <span class="s2">&#34;3001:3001&#34;</span><span class="w">  </span><span class="c"># &lt;Host Port&gt;:&lt;Container Port&gt;</span><span class="w">
</span></span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">unless-stopped</span><span class="w">
</span></span></span></code></pre></div><p>To install and execute the container, I used the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="ln">1</span><span class="cl">docker compose -f uptimeKuma-compose.yml up -d
</span></span></code></pre></div><p>After this, the web UI becomes accessible via the URL:
<code>http://&lt;Server_IP&gt;:UptimeKuma_Port</code></p>
<h2 id="configuration">Configuration</h2>
<p>When configuring UptimeKuma, the first step is to change your login data. In order to do so, navigate to <code>Settings -&gt; Security -&gt; Change Password</code>.</p>
<p>To add a new monitor for one of your services, click the <code>add new monitor</code> button in the top right corner.</p>


<figure>
    <img style="display: block; margin-left: auto; margin-right: auto; width:60%" src="/attachments/401ce7a076ab17b1e057480dc491e524.png">
</figure>


<p>Select the monitor type based on how UptimeKuma should monitor your service. For Instance, for monitoring a Docker container, choose <code>Docker Container</code>. The <code>Friendly Name</code> field is the display name for your monitor.</p>
<p>Set the <code>Container Name/ID</code> to the name or ID of the Docker container you want to monitor. Retrieve this information from your Docker Compose file or using the command <code>docker ps -a</code>. Specify the <code>Docker Host</code> to indicate where UptimeKuma should listen for the Docker container.</p>


<figure>
    <img style="display: block; margin-left: auto; margin-right: auto; width:60%" src="/attachments/9d351bececedf9211fed1b35221f2dd2.png">
</figure>


<p>The <code>Heartbeat Interval</code> determines how often UptimeKuma checks your service. After configuring, click <code>save</code>, and the monitor will appear on the UptimeKuma web UI, checking your service periodically.</p>
<p>To receive notifications when the status of your service changes, set up notifications by editing a service monitor and clicking <code>Setup Notification</code>.</p>


<figure>
    <img style="display: block; margin-left: auto; margin-right: auto; width:60%" src="/attachments/350e598f2a7d1867bf9874c2c089fecd.png">
</figure>


<p>For Telegram notifications, follow these steps:</p>
<ol>
<li>Contact the Telegram Bot <a href="https://telegram.me/BotFather">BotFather</a> to create a new bot.
The <code>/start</code> command, will show you a guide on how to setup a bot.
Alternatively, you can follow the steps below.</li>
<li>Use the <code>/newbot</code> command to create a new bot, following BotFather&rsquo;s guidance.


<figure>
    <img style="display: block; margin-left: auto; margin-right: auto; width:60%" src="/attachments/10e8ce89857027e248f9face00d46aaa.png">
</figure>

</li>
</ol>
<p>

<figure>
    <img style="display: block; margin-left: auto; margin-right: auto; width:60%" src="/attachments/0ed96ca3a02e38d033c386b648c4cef4.png">
</figure>


3. After creating the bot, copy the <code>HTTP API token</code> and enter it in UptimeKuma.


<figure>
    <img style="display: block; margin-left: auto; margin-right: auto; width:60%" src="/attachments/e52b53a8a63e98281f9d9975b64c2579.png">
</figure>


4. Test the configuration and save it. You can now enable Telegram notifications for all your site monitors.</p>
<hr>
<p>References:</p>
<ul>
<li><a href="https://github.com/louislam/uptime-kuma/wiki">UptimeKuma Docs</a></li>
</ul>
 
</div>
<a href="#top" class="back-to-top-button">
  &#9650; 
</a>

    </div><div class="footer">
  Made with <a href="https://gohugo.io/">Hugo</a>, website licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>.
</div>
</body>
</html>
